<h1>Feedbacks</h1>

<%= render 'filter', path: feedbacks_path %>

<p>You can find a history of all feedbacks submitted below.</p>
<table>
  <thead>
    <tr>
      <th><%= sortable "name", "Student Name" %></th>
      <th><%= sortable "team_name", "Team" %></th>
      <th><%= sortable "participation_rating" %></th>
      <th><%= sortable "effort_rating" %></th>
      <th><%= sortable "punctuality_rating" %></th>
      <th><%= sortable "priority" %></th>
      <th>Comments</th>
      <th><%= sortable "timestamp" %></th>
      <th colspan="7"></th>
    </tr>
  </thead>

  <tbody>
    <% @feedbacks.each do |feedback| %>
      <tr>
        <td><%= feedback.user.name %></td>
        <td><%= feedback.team.team_name %></td>
        <td><%= feedback.participation_rating %></td>
        <td><%= feedback.effort_rating %></td>
        <td><%= feedback.punctuality_rating %></td>
        <td><%= feedback.get_priority_word %></td>
        <%if feedback.comments.size == 0%>
          <td>Students Has Not Submitted Comments!</td>
        <%else%>
          <td><%= feedback.comments %></td>
        <%end%>
        <td><%= feedback.timestamp.strftime('%Y-%m-%d %H:%M EST') %></td>
        <td><%= link_to 'Show', feedback %></td>
        <td><%= link_to 'Edit', edit_feedback_path(feedback) %></td>
        <td>
          <%= form_with model: feedback, local: true, method: 'delete' do |f| %>
            <%= f.submit "Delete Feedback", class: "table-btn" %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>


<%= link_to 'Back', :back %>
