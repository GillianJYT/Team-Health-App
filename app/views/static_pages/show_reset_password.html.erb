</br>

<%= form_with(local: true, url: reset_password_url, method: :post) do |form| %>
  <% if !flash[:error].nil? %>
    <!-- existing password error -->
    <% is_existing_error = flash[:error].include? 'existing' %>

    <!-- new password error -->
    <% is_new_error = flash[:error].include? 'specifications'%>
  <% end %>

  <div class="field">
    <div class=<%= is_existing_error ? "field_with_errors" : "" %>>
      <%= form.label "Existing Password" %>
    </div>
    <div class=<%= is_existing_error ? "field_with_errors" : "" %>>
      <%= form.password_field :existing_password %>
    </div>
  </div>

  <div class="field">
    <div class=<%= is_new_error ? "field_with_errors" : "" %>>
      <%= form.label 'New Password' %>
    </div>
    <div class=<%= is_new_error ? "field_with_errors" : "" %>>
      <%= form.password_field :password %>
    </div>
  </div>

  <div class="field">
    <div class=<%= is_new_error ? "field_with_errors" : "" %>>
      <%= form.label 'New Password Confirmation' %>
    </div>
    <div class=<%= is_new_error ? "field_with_errors" : "" %>>
      <%= form.password_field :password_confirmation %>
    </div>
  </div>

  <div class="actions">
    <%= form.submit "Submit" %>
  </div>
<% end %>

<br/>
<p><%= link_to 'Back', :back %></p>